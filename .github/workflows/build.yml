name: Build

on: 
  workflow_call:
    inputs:
      state:
         description: "lfc state"
         required: true
         type: string
defaults:
  run:
    shell: bash -euxo pipefail {0}

jobs:
  cont:
    runs-on: "ubuntu-latest"
    outputs: 
      conterr: ${{ steps.islfc.value }}
    steps: 
      - name: islfc
        run: echo value=${{inputs.state == 'lfc' && 'true' || 'false' }} >> ${GITHUB_OUTPUT}; 
      
  build:
    needs: [cont]
    runs-on: "ubuntu-latest"
    continue-on-error: ${{ fromJSON(needs.cont.outputs.conterr) }}
    steps:
      - name: say
        run: echo ${{ inputs.state }}; [ ${{ inputs.state }} != "lfc" ]
